# Роутер для статичных html страниц
___
## router.view  
Синтаксис:
**app.js**  
```javaScript
import router from './modules/router/router.view.js';
router.init();

```
**html**  
```html
<main class="replaceable" data-id="main">
	...
</main>
<div class="replaceable" data-id="popups">
	...
</div>

```
### Принцип работы  
Находит элементы с классом **replaceable** (заменим в дефолтных опциях роутера) и подменяет контент внутри этих элементов на новый при загрузке новой страницы. Страницы при этом грузятся целиком, как при прямом заходе, поэтому доп работ на бэке не требуется. На случай, если таких элементов несколько, нужно указывать им уникальный аттрибут **data-id**  

### Важные события, генерируемые роутером  
```javaScript
dispatcher.subscribe((e) => {
	if (e.type === 'content:replaced') {
		...
	}
})
```
Генерируется после замены страницы, но до конца анимации появления. Полезно, если нужно обратиться к каким-то dom элементам после смены страницы  
```javaScript
dispatcher.subscribe((e) => {
	if (e.type === 'before-replaced') {
		...
	}
})
```
Генерируется после обновления всех сторов, связанных с роутером, истории и тайтла страницы, но до замены контента. Полезно если требуется обработать url страницы.  

### Далее про этапы смены страницы. Если использовать встроенный модуль анимаций, читать не обязательно  
Смена страницы разбита на этапы  
1-й - анимация исчезновения и загрузка новой страницы  
2-й - замена контента  
3-й - появление страницы  

Переход на следующий этап происходит, когда соответствующеу событие срабатывает заданное количество раз.  
```javasript
dispatcher.dispatch({
	type: 'page-transition:step-' + step + '-complete'
});
```
Количество необходимых срабатываний задано в дефолтных обциях роутера  
По-умолчанию:  
2 срабатывания на 1-й этап (страница загружена и проигралась анимация)  
1 срабатывания на 2-й этап (контент сменился)  
1 срабатывания на 3-й этап (проигралась анимация)  
После чего роутер снова готов к переходу.  





